(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{159:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var c=n(4),r=n(0),a=n(22),i=n.n(a),s=(n(159),n(45)),o=n.n(s),u=n(57),j=n(34),l=n(44),b=n.n(l),d=function(e){return{type:"ALL_PRODUCT",info:e}},O=function(e){return{type:"ALL_PROMO",info:e}},p=function(e){return{type:"ALL_ORDER",info:e}},h=n(83),m=n(28),x=n(31),f=n(27),y=n(258),v=n(47),C=n(257),g=n(259),w=n(260),T=n(50),q=n(81),k=n(256),_=n(147),I=function(e){var t=Object(m.g)(),n=function(e){t.push(e)};return Object(c.jsxs)("div",{children:[Object(c.jsxs)("article",{children:["This is ",e.name]}),Object(c.jsx)(T.a,{onClick:function(){n("/")},children:"Home"}),Object(c.jsx)(T.a,{onClick:function(){n("/products")},children:"Products"}),Object(c.jsx)(T.a,{onClick:function(){n("/cart")},children:"Cart"}),Object(c.jsx)(T.a,{onClick:function(){n("/promos")},children:"Promo"}),Object(c.jsx)(T.a,{onClick:function(){n("/order")},children:"Order"})]})},E=function(e){var t=y.a.useForm(),n=Object(f.a)(t,1)[0];return Object(r.useEffect)((function(){n.setFieldsValue({name:e.product.name,quantity:e.product.quantity,price:e.product.price})}),[e]),Object(c.jsx)(v.a,{span:8,children:Object(c.jsx)(C.a,{size:"small",title:e.product.name,style:{width:300},cover:Object(c.jsx)(g.a,{width:200,src:e.product.image}),children:Object(c.jsxs)(y.a,{onFinish:function(e){console.log(e)},form:n,children:[Object(c.jsx)(y.a.Item,{name:"name",label:"Name",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"text"})}),Object(c.jsx)(y.a.Item,{name:"quantity",label:"Quantity",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"number"})}),Object(c.jsx)(y.a.Item,{name:"price",label:"Price",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"number"})}),Object(c.jsxs)(y.a.Item,{children:[Object(c.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(c.jsx)(T.a,{htmlType:"button",onClick:function(){n.resetFields()},children:"Reset"})]})]})})})},R={labelCol:{span:8},wrapperCol:{span:16}},S={wrapperCol:{offset:8,span:16}},F=function(){var e=Object(j.c)((function(e){return e.products})),t=y.a.useForm(),n=Object(f.a)(t,1)[0],a=Object(r.useState)([]),i=Object(f.a)(a,2),s=i[0],l=i[1],d=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileList,e.t0=l,e.next=4,n;case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)(I,{name:"Product"}),Object(c.jsx)(q.a,{children:e.map((function(e){return Object(c.jsx)(E,{product:e},e._id)}))}),Object(c.jsxs)(y.a,Object(x.a)(Object(x.a)({},R),{},{form:n,name:"control-hooks",onFinish:function(e){var t=[{name:e.Name,quantity:e.Quantity,price:e.Price,image:s[0].thumbUrl}];b.a.post("http://localhost:3000/products",t[0]).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),n.resetFields()},children:[Object(c.jsx)(y.a.Item,{name:"Name",label:"Name",rules:[{required:!0}],children:Object(c.jsx)(w.a,{})}),Object(c.jsx)(y.a.Item,{name:"Quantity",label:"Quantity",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"number"})}),Object(c.jsx)(y.a.Item,{name:"Price",label:"Price",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"number"})}),Object(c.jsx)(_.a,{rotate:!0,children:Object(c.jsx)(k.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:s,onChange:d,children:s.length<1&&"+ Upload"})}),Object(c.jsxs)(y.a.Item,Object(x.a)(Object(x.a)({},S),{},{children:[Object(c.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(c.jsx)(T.a,{htmlType:"button",onClick:function(){n.resetFields()},children:"Reset"})]}))]}))]})},P=n(261),D=n(150),A=n(151),L=function(e){return{type:"ADD_CART",info:e}},N=function(e){return Object(c.jsx)(P.a,{message:"Warning",description:"Quantity of ".concat(e.error.name," max is ").concat(e.error.quantity),type:"warning",showIcon:!0,closable:!0})};function Q(e){var t=Object(r.useState)(0),n=Object(f.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)(!1),o=Object(f.a)(s,2),u=o[0],l=o[1],b=Object(r.useState)(!1),d=Object(f.a)(b,2),O=d[0],p=d[1],h=Object(j.b)(),m=Object(c.jsx)(P.a,{message:"Warning",description:"Quantity should not be less than 0",type:"warning",showIcon:!0,closable:!0}),x=function(e){h(L(e))};return Object(c.jsxs)(v.a,{span:8,children:[Object(c.jsxs)(C.a,{size:"small",title:e.product.name,style:{width:300},cover:Object(c.jsx)(g.a,{width:200,src:e.product.image}),children:[Object(c.jsxs)("p",{children:[e.product.price,"$"]}),Object(c.jsx)("div",{children:Object(c.jsxs)(q.a,{children:[Object(c.jsx)(v.a,{span:8,children:Object(c.jsx)(T.a,{onClick:function(){!function(){if(0!==a){i(a-1),l(!1);var t=[{id:e.product._id,name:e.product.name,quantity:a-1}];x(t)}else l(!0);p(!1)}()},children:Object(c.jsx)(D.a,{})})}),Object(c.jsx)(v.a,{span:8,children:Object(c.jsx)("p",{children:a})}),Object(c.jsx)(v.a,{span:8,children:Object(c.jsx)(T.a,{onClick:function(){!function(){if(e.product.quantity<a+1)p(!0);else{i(a+1),p(!1);var t=[{id:e.product._id,name:e.product.name,quantity:a+1}];x(t)}l(!1)}()},children:Object(c.jsx)(A.a,{})})})]})})]}),u&&m,O&&Object(c.jsx)(N,{error:e.product})]})}var U=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("http://localhost:3000/products");case 2:t=e.sent,a(t.data.Products);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)(I,{name:"Home"}),Object(c.jsx)(q.a,{children:n.map((function(e,t){return Object(c.jsx)(Q,{product:e},t)}))})]})},W=function(e){return{type:"RESET_CART",info:e}},X=function(e,t){return{type:"EDIT_CART",id:e,count:t}},M=function(e){return{type:"DELETE_CART",id:e}},V={labelCol:{span:8},wrapperCol:{span:16}},z={wrapperCol:{offset:8,span:16}},B=function(e){var t=Object(j.b)(),n=Object(r.useState)(0),a=Object(f.a)(n,2),i=a[0],s=a[1],o=Object(r.useState)(!1),u=Object(f.a)(o,2),l=u[0],b=u[1],d=e.products.filter((function(t){return t.name===e.cart.name}));return Object(r.useEffect)((function(){s(e.cart.quantity)}),[e]),Object(c.jsxs)("div",{children:[Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(g.a,{src:d[0].image,alt:"image"})}),Object(c.jsx)(T.a,{onClick:function(){return n=e.cart.id,void t(M(n));var n},children:"Delete"}),Object(c.jsxs)("li",{children:["Name: ",e.cart.name]}),Object(c.jsxs)(q.a,{children:[Object(c.jsx)(v.a,{span:8,children:Object(c.jsx)(T.a,{onClick:function(){var n;n=e.cart.id,t(X(n,-1)),i-1!==0&&e.updateTotal(-d[0].price),s(i-1),b(!1)},children:Object(c.jsx)(D.a,{})})}),Object(c.jsx)(v.a,{span:8,children:Object(c.jsxs)("p",{children:["quantity: ",i]})}),Object(c.jsx)(v.a,{span:8,children:Object(c.jsx)(T.a,{onClick:function(){var n;n=e.cart.id,i+1>d[0].quantity?b(!0):(t(X(n,1)),e.updateTotal(d[0].price),s(i+1))},children:Object(c.jsx)(A.a,{})})})]}),Object(c.jsxs)("li",{children:["price: ",d[0].price]}),Object(c.jsxs)("li",{children:["total: ",d[0].price*e.cart.quantity]})]}),l&&Object(c.jsx)(H,{error:d[0]})]})},H=function(e){return Object(c.jsx)(P.a,{message:"Warning",description:"Quantity of ".concat(e.error.name," max is ").concat(e.error.quantity),type:"warning",showIcon:!0,closable:!0})},J=function(){var e=Object(r.useState)(0),t=Object(f.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(0),s=Object(f.a)(i,2),o=s[0],u=s[1],l=y.a.useForm(),b=Object(f.a)(l,1)[0],d=Object(j.b)(),O=Object(j.c)((function(e){return e})),p=Object(r.useState)(!1),h=Object(f.a)(p,2),v=h[0],C=h[1],g=Object(r.useState)(!1),q=Object(f.a)(g,2),k=q[0],_=q[1],E=Object(c.jsx)(P.a,{message:"Warning",description:"Code incorrect",type:"warning",showIcon:!0,closable:!0}),R=Object(c.jsx)(P.a,{message:"Success",description:"Code correct",type:"success",showIcon:!0,closable:!0}),S=function(){b.resetFields()},F=function(e){u(o+e)};return Object(r.useEffect)((function(){var e=0,t=O.carts.map((function(t){var n,c=O.products.filter((function(e){return e.name===t.name}));return n=c[0].quantity<t.quantity?c[0].quantity*c[0].price:t.quantity*c[0].price,e+=n}));return u(e),t}),[O]),Object(c.jsxs)("div",{children:[n?Object(c.jsx)(m.a,{to:{pathname:"/checkout",data:o}}):null,Object(c.jsx)(I,{name:"Cart"}),void 0===O.carts||O.carts.map((function(e){return Object(c.jsx)(B,{cart:e,products:O.products,carts:O.carts,updateTotal:F},e.name)})),Object(c.jsxs)("p",{children:["Subtotal: ",o]}),Object(c.jsxs)(y.a,Object(x.a)(Object(x.a)({},V),{},{form:b,name:"control-hooks",onFinish:function(e){var t=O.promos.filter((function(t){return t.code===e.Code}));0===t.length?(C(!0),_(!1),S()):t[0].quantity>0&&(o-t[0].price<0?u(0):u(o-t[0].price),_(!0),C(!1))},children:[Object(c.jsx)(y.a.Item,{name:"Code",label:"Code",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"text"})}),v&&E,k&&R,Object(c.jsxs)(y.a.Item,Object(x.a)(Object(x.a)({},z),{},{children:[Object(c.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(c.jsx)(T.a,{htmlType:"button",onClick:S,children:"Reset"}),Object(c.jsx)(T.a,{htmlType:"button",onClick:function(){d(W([])),u(0)},children:"Reset all cart"}),Object(c.jsx)(T.a,{htmlType:"button",onClick:function(){a(1)},children:"Check out"})]}))]}))]})},$={labelCol:{span:8},wrapperCol:{span:16}},G={wrapperCol:{offset:8,span:16}},K=function(){var e=y.a.useForm(),t=Object(f.a)(e,1)[0],n=Object(r.useState)({}),a=Object(f.a)(n,2),i=a[0],s=a[1],j=function(){t.resetFields()};return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("http://localhost:3000/promos",i).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i]),Object(c.jsxs)("div",{children:[Object(c.jsx)(I,{name:"Promo"}),Object(c.jsxs)(y.a,Object(x.a)(Object(x.a)({},$),{},{form:t,name:"control-hooks",onFinish:function(e){var t=[{name:e.Name,quantity:e.Quantity,price:e.Price,code:e.Code}];s(t[0]),j()},children:[Object(c.jsx)(y.a.Item,{name:"Name",label:"Name",rules:[{required:!0}],children:Object(c.jsx)(w.a,{})}),Object(c.jsx)(y.a.Item,{name:"Quantity",label:"Quantity",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"number"})}),Object(c.jsx)(y.a.Item,{name:"Price",label:"Price",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"number"})}),Object(c.jsx)(y.a.Item,{name:"Code",label:"Code",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"text"})}),Object(c.jsxs)(y.a.Item,Object(x.a)(Object(x.a)({},G),{},{children:[Object(c.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(c.jsx)(T.a,{htmlType:"button",onClick:j,children:"Reset"})]}))]}))]})},Y={labelCol:{span:8},wrapperCol:{span:16}},Z={wrapperCol:{offset:8,span:16}},ee=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:e.cart.name}),Object(c.jsx)("li",{children:e.cart.quantity})]})})},te=function(e){var t=y.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(m.g)(),a=Object(j.c)((function(e){return e.carts}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(I,{name:"Check out"}),Object(c.jsxs)(y.a,Object(x.a)(Object(x.a)({},Y),{},{form:n,name:"control-hooks",onFinish:function(t){t.cart={stateCart:a},t.subtotal=e.location.data,b.a.post("http://localhost:3000/order",t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),n.resetFields(),r.push("/")},children:[Object(c.jsx)(y.a.Item,{name:"name",label:"Name",rules:[{required:!0}],children:Object(c.jsx)(w.a,{})}),Object(c.jsx)(y.a.Item,{name:"phone",label:"Phone",rules:[{required:!0,pattern:new RegExp(/((09|03|07|08|05)+([0-9]{8})\b)/g),message:"Wrong phone number!"}],children:Object(c.jsx)(w.a,{type:"text"})}),Object(c.jsx)(y.a.Item,{name:"address",label:"Address",rules:[{required:!0}],children:Object(c.jsx)(w.a,{type:"text"})}),Object(c.jsxs)(y.a.Item,Object(x.a)(Object(x.a)({},Z),{},{children:[Object(c.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(c.jsx)(T.a,{htmlType:"button",onClick:function(){n.resetFields()},children:"Reset"})]}))]})),a.map((function(e){return Object(c.jsx)(ee,{cart:e},e.name)})),Object(c.jsxs)("p",{children:["Subtotal: ",e.location.data]})]})},ne=function(e){return console.log(e.order),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{children:["Name: ",e.order.name]}),Object(c.jsxs)("li",{children:["Phone: ",e.order.phone]}),Object(c.jsxs)("li",{children:["Address: ",e.order.address]}),e.order.cart.stateCart.map((function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("li",{children:e.name}),Object(c.jsx)("li",{children:e.quantity})]})})),Object(c.jsxs)("li",{children:["Subtotal: ",e.order.subtotal]})]})})},ce=function(){var e=Object(j.c)((function(e){return e.orders}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(I,{name:"Order"}),e.map((function(e){return Object(c.jsx)(ne,{order:e},e._id)}))]})};n(253);var re=function(){var e=Object(j.b)();return Object(r.useEffect)((function(){function t(){return(t=Object(u.a)(o.a.mark((function t(){var n,c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("http://localhost:3000/products");case 2:return n=t.sent,t.next=5,b.a.get("http://localhost:3000/promos");case 5:return c=t.sent,t.next=8,b.a.get("http://localhost:3000/order");case 8:r=t.sent,e(d(n.data.Products)),e(O(c.data.Promos)),e(p(r.data.Order));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(h.a,{children:Object(c.jsxs)(m.d,{children:[Object(c.jsx)(m.b,{exact:!0,path:"/",component:U}),Object(c.jsx)(m.b,{path:"/products",component:F}),Object(c.jsx)(m.b,{path:"/cart",component:J}),Object(c.jsx)(m.b,{path:"/promos",component:K}),Object(c.jsx)(m.b,{path:"/checkout",component:te}),Object(c.jsx)(m.b,{path:"/order",component:ce})]})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},ie=n(68),se=[],oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CART":var n=t.info,c=e.filter((function(e){return e.name!==n[0].name}));return 0===n[0].quantity?e:[].concat(c,n);case"RESET_CART":return[];case"EDIT_CART":var r=e.findIndex((function(e){return e.id===t.id}));if(e[r].quantity=e[r].quantity+t.count,e[r].quantity<=0){var a=e.filter((function(e){return e.id!==t.id}));return a}return e;case"DELETE_CART":var i=e.filter((function(e){return e.id!==t.id}));return i;default:return e}},ue=[],je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_PRODUCT":var n=t.info;return n;case"ADD_PRODUCT":var c=[].concat(e,t.info);return c;default:return e}},le=[],be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_PROMO":var n=t.info;return n;case"ADD_PROMO":var c=[].concat(e,t.info);return c;default:return e}},de=[],Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_ORDER":var n=t.info;return n;default:return e}},pe=Object(ie.b)({carts:oe,products:je,promos:be,orders:Oe}),he=Object(ie.c)(pe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(c.jsx)(j.a,{store:he,children:Object(c.jsx)(re,{})}),document.getElementById("root")),ae()}},[[254,1,2]]]);
//# sourceMappingURL=main.dcd0bbe0.chunk.js.map